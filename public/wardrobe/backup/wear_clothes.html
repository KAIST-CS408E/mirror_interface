<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>My Wardrobe</title>
    <!-- Bootstrap core CSS -->
    <link href="../libs/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Custom styles for this template -->

    <link href="4/ninja-slider.css" rel="stylesheet" type="text/css" />
    <script src="4/ninja-slider.js" type="text/javascript"></script>

    <style>
    canvas#viewport { border: 1px solid white; margin: auto;}

    <style>
        .main-window {
          padding: 20px;
          margin: auto;
        }

        body {
          background-color: black;
          color: white;
        }

        .wdb-nav-card {
          margin-bottom: 15px;
          margin-top: 15px;
          /*background-color: gray;*/
          text-align: center;
          border-style: solid;
        }


        .wdb-nav-card:hover {
          background-color: gray;
        }

        .main-card-wdb {
          background-color: black;
        }



        .wdb-model-card {
          margin-bottom: 15px;
          margin-top: 15px;
          /*background-color: gray;*/
          text-align: center;
          /*border-style: solid;*/
        }



        .center_aligned {
          text-align: center;
        }



        .weatherwidget-io {
          pointer-events: none;
        }
        body {font: normal 0.9em Arial;margin:0;}
        a {color:#1155CC;}
        ul li {padding: 10px 0;}
        header {display:block;padding:60px 0 10px;background:rgba(0,0,0,0.8);text-align:center;}
        header a {
            font-family: sans-serif;
            font-size: 24px;
            line-height: 24px;
            padding: 8px 13px 7px;
            color: #555;
            text-decoration:none;
            transition: color 0.7s;
        }
        header a.active {
            font-weight:bold;
            width: 24px;
            height: 24px;
            padding: 4px;
            text-align: center;
            display:inline-block;
            border-radius: 50%;
            background: #4d5256;
            color: #191919;
        }
        code {display:block;white-space:pre; background-color:#f6f6f6;padding:8px; overflow:auto;border:1px dotted #999;margin:6px 0;}

        #ninja-slider-acc {
          display: none;
        }
        #ninja-slider-shirt{
          display: none;
        }
        #ninja-slider-shoe{
          display: none;
        }
        #ninja-slider-pants{
          display: none;
        }
        #ninja-slider-coat{
          display: none;
        }

        .select_btn {
          float: right;
        }


        .wardrobe_change_card:hover {
          background-color: #202020;
          cursor: pointer;
        }


        .select_btn {
          font-size: 23px
        }


        .select_w_text {
          font-size: 30px;
        }


    </style>

  </head>

  <body>


    <div class="container main-window">
      <br>
      <br>
      
      <!-- page_title -->

 <!--      <div class="row md-4">

          <div class="col-md-3 col-sm-3">
            <a href="javascript:history.back()" id="back_button" class="mybtn btn btn-block" style="color:white; font-size: 30px; text-align: left;">
              <i style="padding-top: 30px;" class="fa fa-chevron-left"></i> Home
            </a>
          </div>

            <div class="col-lg-6 col-md-6 col-sm-6" style="font-size: 30px; padding-top: 50px; text-align: center;">
              My Wardrobe : <span id="wtitle">shirts</span>
            </div> 


            <div class="col-lg-3 col-md-3 col-sm-3">
              <div class="datetime"  align="center">
                <div >
                  <h1 id="display_time"></h1>
                </div>
                <div >
                  <h4 id="display_date"></h3>
                </div>
              </div>
            </div> 



        </div>
      </div> -->  
      <br>
      <div class="row">
        
        <div class="col-md-3 col-sm-3">
          <a href="javascript:history.back()" id="back_button" class="btn btn-block" style="color:white; font-size: 25px; text-align: left;">
              <i class="fa fa-chevron-left"></i> Home
          </a>
        </div>

        <div class="col-md-5 col-sm-5" style="text-align: center; font-size: 25px; margin-top: 15px">
          My Wardrobe : <span id="wtitle">shirts</span>
        </div>

        <div class="col-md-4 col-sm-4">
          <div class="datetime"  align="center">
            <div >
              <h1 id="display_time"></h1>
            </div>
            <div >
              <h4 id="display_date"></h3>
            </div>
          </div>
        </div> 


      </div>


      <br>
      <!-- wardrobe slider -->
      <div class="row">
        <div class="col-md-12 col-sm-12" style="text-align: center"></div>
        
        <!-- shirts slider -->
          <div id='ninja-slider-shirt'>
            <div>
              <div class="slider-inner">
                <ul>
                  <li>
                    <a class="ns-img" onclick="change_clothing(2, 1)" href="../images/wardrobe/new_clothes/shirt1.png"></a>
                    <button id="_2_1_png" class="btn btn-primary select_btn">SELECT ITEM</button>
                  </li>
                  <li>
                    <a class="ns-img" onclick="change_clothing(2, 2)" href="../images/wardrobe/new_clothes/shirt2.png"></a>
                    <button id="_2_2_png" class="btn btn-primary select_btn">SELECT ITEM</button>
                  </li>
                  <li>
                    <a class="ns-img" onclick="change_clothing(2, 3)" href="../images/wardrobe/new_clothes/shirt3.png"></a>
                    <button id="_2_3_png" class="btn btn-primary select_btn">SELECT ITEM</button>
                  </li>
                </ul>
              </div>
            </div>
          </div>  

        <!-- coats slider -->
          <div id='ninja-slider-coat'>
            <div>
              <div class="slider-inner">
                <ul>
                  <li>
                    <a class="ns-img" onclick="change_clothing(3, 1)" href="../images/wardrobe/new_clothes/coat1.png"></a>
                    <button id="_3_1_png" class="btn btn-primary select_btn">SELECT ITEM</button>
                  </li>
                  <li>
                    <a class="ns-img" onclick="change_clothing(3, 2)" href="../images/wardrobe/new_clothes/coat2.png"></a>
                    <button id="_3_2_png" class="btn btn-primary select_btn">SELECT ITEM</button>
                  </li>
                  <li>
                    <a class="ns-img" onclick="change_clothing(3, 3)" href="../images/wardrobe/new_clothes/coat3.png"></a>
                    <button id="_3_3_png" class="btn btn-primary select_btn">SELECT ITEM</button>
                  </li>
                </ul>
              </div>
            </div>
          </div> 



        <!-- acc slider -->
          <div id='ninja-slider-acc'>
            <div>
              <div class="slider-inner">
                <ul>
                  <li>
                    <a class="ns-img" onclick="change_clothing(4, 1)" href="../images/wardrobe/new_clothes/acc1.png"></a>
                    <button id="_4_1_png" class="btn btn-primary select_btn">SELECT ITEM</button>
                  </li>
                  <li>
                    <a class="ns-img" onclick="change_clothing(4, 2)" href="../images/wardrobe/new_clothes/acc2.png"></a>
                    <button id="_4_2_png" class="btn btn-primary select_btn">SELECT ITEM</button>
                  </li>
                  <li>
                    <a class="ns-img" onclick="change_clothing(4, 3)" href="../images/wardrobe/new_clothes/acc3.png"></a>
                    <button id="_4_3_png" class="btn btn-primary select_btn">SELECT ITEM</button>
                  </li>
                </ul>
              </div>
            </div>
          </div> 



        <!-- shoe slider -->
          <div id='ninja-slider-shoe'>
            <div>
              <div class="slider-inner">
                <ul>
                  <li>
                    <a class="ns-img" onclick="change_clothing(1, 1)" href="../images/wardrobe/new_clothes/shoe1.png"></a>
                    <button id="_1_1_png" class="btn btn-primary select_btn">SELECT ITEM</button>
                  </li>
                  <li>
                    <a class="ns-img" onclick="change_clothing(1, 2)" href="../images/wardrobe/new_clothes/shoe2.png"></a>
                    <button id="_1_2_png" class="btn btn-primary select_btn">SELECT ITEM</button>
                  </li>
                  <li>
                    <a class="ns-img" onclick="change_clothing(1, 3)" href="../images/wardrobe/new_clothes/shoe3.png"></a>
                    <button id="_1_3_png" class="btn btn-primary select_btn">SELECT ITEM</button>
                  </li>
                </ul>
              </div>
            </div>
          </div>  



        <!-- pants slider -->
          <div id='ninja-slider-pants'>
            <div>
              <div class="slider-inner">
                <ul>
                  <li>
                    <a class="ns-img" onclick="change_clothing(0, 1)" href="../images/wardrobe/new_clothes/pants1.png"></a>
                    <button id="_0_1_png" class="btn btn-primary select_btn">SELECT ITEM</button>
                  </li>
                  <li>
                    <a class="ns-img" onclick="change_clothing(0, 2)" href="../images/wardrobe/new_clothes/pants2.png"></a>
                    <button id="_0_2_png" class="btn btn-primary select_btn">SELECT ITEM</button>
                  </li>
                  <li>
                    <a class="ns-img" onclick="change_clothing(0, 3)" href="../images/wardrobe/new_clothes/pants3.png"></a>
                    <button id="_0_3_png" class="btn btn-primary select_btn">SELECT ITEM</button>
                  </li>
                  <li>
                    <a class="ns-img" onclick="change_clothing(0, 4)" href="../images/wardrobe/new_clothes/pants4.png"></a>
                    <button id="_0_4_png" class="btn btn-primary select_btn">SELECT ITEM</button>
                  </li>
                </ul>
                <!-- <div class="fs-icon" title="Expand/Close"></div> -->
              </div>
            </div>
          </div> 



      </div> <!-- end sliders row -->
      <br>

      <!-- start other clothes and model row -->
      <div class="row">
        
        <div class="col-md-5 col-sm-5" style="text-align: center">
          <h3>Other Clothing Items</h3>

          <br><br>
          <div class="row wardrobe_change_card" style="border: 2px solid;" onclick="change_to(4)">
            <div class="col-md-4 col-sm-4" style="text-align: center">
              <div class="icon-pic">
                <img src="../images/wardrobe/hat_white.png" width="100%">
              </div>
            </div>
            <div class="col-md-8 col-sm-8" style="text-align: left"><br><br><a class="select_w_text">SELECT HATS</a></div>  
          </div>
          <br>

          <div class="row wardrobe_change_card" style="border: 2px solid;" onclick="change_to(2)">
            <div class="col-md-4 col-sm-4" style="text-align: center">
              <div class="icon-pic">
                <img src="../images/wardrobe/shirt_white.png" width="100%">
              </div>
            </div>
            <div class="col-md-8 col-sm-8" style="text-align: left"><br><br><a class="select_w_text">SELECT SHIRTS</a></div>  
          </div>
          <br>


          <div class="row wardrobe_change_card" style="border: 2px solid;" onclick="change_to(3)">
            <div class="col-md-4 col-sm-4" style="text-align: center">
              <div class="icon-pic">
                <img src="../images/wardrobe/coat_white.png" width="100%">
              </div>
            </div>
            <div class="col-md-8 col-sm-8" style="text-align: left"><br><br><a class="select_w_text">SELECT COATS</a></div>  
          </div>
          <br>


          <div class="row wardrobe_change_card" style="border: 2px solid;" onclick="change_to(0)">
            <div class="col-md-4 col-sm-4" style="text-align: center">
              <div class="icon-pic">
                <img src="../images/wardrobe/pants_white.png" width="100%">
              </div>
            </div>
            <div class="col-md-8 col-sm-8" style="text-align: left"><br><br><a class="select_w_text">SELECT PANTS</a></div>  
          </div>
          <br>


          <div class="row wardrobe_change_card" style="border: 2px solid;" onclick="change_to(1)">
            <div class="col-md-4 col-sm-4" style="text-align: center">
              <div class="icon-pic">
                <img src="../images/wardrobe/shoe_white.png" width="100%">
              </div>
            </div>
            <div class="col-md-8 col-sm-8" style="text-align: left"><br><br><a class="select_w_text">SELECT SHOES</a></div>  
          </div>

        </div>



        <div class="col-md-7 col-sm-7" style="text-align: center">
          <h3>Today's look</h3>
          <canvas id="viewport"></canvas>

        </div>
      </div> <!-- end other clothes and model row -->



      <br><br>
      
    </div>
    <!-- Bootstrap core JavaScript -->
    <script src="../libs/jquery/jquery.min.js"></script>
    <script src='https://www.planyo.com/libs/planyonet-fc.js'></script>
    <script src='https://www.planyo.com/embed-schedule.js'></script>
    <script src="../libs/bootstrap/js/bootstrap.bundle.min.js"></script>

    <script>

      var canvas = document.getElementById('viewport'),
      context = canvas.getContext('2d');
      canvas.width = 400;
      canvas.height = 800;
   

      /*
      pants : 0
      shoe : 1
      shirt : 2
      coat : 3
      acc : 4
      */


      function wear_pants() {
        if (myclothes && myclothes[0]){
          pants = new Image(175, 350);
          pants.src = "../images/wardrobe/new_clothes/pants" + myclothes[0] + ".png";
          pants.onload = function(){
            context.drawImage(this, 113, 375, 175, 350);
            wear_shirt();
          }  
        } else {
          wear_shirt();
        }
      }

      function wear_shirt() {
        if (myclothes && myclothes[2]){
          shirt = new Image(275, 275);
          shirt.src = '../images/wardrobe/new_clothes/shirt'+ myclothes[2] +'.png';
          shirt.onload = function(){
            this.zIndex = 1000;
            context.drawImage(this, 62, 125, 275, 275);
            wear_coat();
          }
        } else {
          wear_coat();
        }
      }

      function wear_coat() {
        if (myclothes && myclothes[3]){
          coat = new Image(325, 325);
          coat.src = '../images/wardrobe/new_clothes/coat' + myclothes[3] + '.png';
          coat.onload = function(){
            context.drawImage(this, 37, 100, 325, 325);
            wear_head();   
          }
        } else {
          wear_head();
        }
        
      }

      function wear_head() {
        head = new Image(100, 100);
        head.src = '../images/wardrobe/new_clothes/head.png';
        head.onload = function(){
          context.drawImage(this, 137, 13, 125, 125);
          wear_cap();
        }
      }

      function wear_cap() {
        if (myclothes && myclothes[4]){
          cap_hat = new Image(125, 75);
          cap_hat.src = '../images/wardrobe/new_clothes/acc' + myclothes[4] +'.png';
          cap_hat.onload = function(){
            context.drawImage(this, 135, -12, 125, 75);
          }  
        }
      }

      function wear_shoes() {
        if (myclothes && myclothes[1]){
          shoe = new Image(175, 100);
          shoe.src = '../images/wardrobe/new_clothes/shoe' + myclothes[1] +'.png';
          shoe.onload = function(){
            context.drawImage(this, 117, 700, 175, 100);
            wear_pants();
          }
        } else {
          wear_pants();
        }
      }      


      function wear_all_clothes() {
        context.clearRect(0, 0, canvas.width, canvas.height);
        wear_shoes();
      }


      var slider_ids = ["ninja-slider-pants", "ninja-slider-shoe", "ninja-slider-shirt",               "ninja-slider-coat", "ninja-slider-acc"]
      var slider_names = ["PANTS", "SHOES", "SHIRTS", "COATS", "HATS"]

      /*
      pants : 0
      shoe : 1
      shirt : 2
      coat : 3
      acc : 4
      */

      var myclothes = [0, 0, 0, 0, 0];


      function unselect(btn_id) {
        $(btn_id).removeClass("btn-primary").addClass("btn-secondary")
        $(btn_id).text("SELECTED")
      }


      function change_clothing(cloth_type, idx) {
        
        var btn_id = "#_" + cloth_type + "_" + idx + "_png";



        for(var i = 1; i < 5; i++) {
          var btn_id_ = "#_" + cloth_type + "_" + i + "_png";
          if ($(btn_id_)) {
            $(btn_id_).removeClass("btn-secondary").addClass("btn-primary");
            $(btn_id_).text("SELECT ITEM")
          }
        }

        if (myclothes[cloth_type] == idx) {
          myclothes[cloth_type] = 0;
          sessionStorage.setItem("myclothesdict", myclothes);
          wear_all_clothes();

        } else {

          $(btn_id).removeClass("btn-primary").addClass("btn-secondary")
          $(btn_id).text("SELECTED")
        
          myclothes[cloth_type] = idx;
          console.log(myclothes);
          sessionStorage.setItem("myclothesdict", myclothes);
          wear_all_clothes();  
        }

        
      }


      function set_selected_items() {
        for (var i = 0; i < 5; i++) {
          var btn_id = "#_" + i + "_" + myclothes[i] + "_png";
          if ($(btn_id)) {
            $(btn_id).removeClass("btn-primary").addClass("btn-secondary");
            $(btn_id).text("SELECTED");
          }
        }
      }

      function reload_js() {
        var head = document.getElementsByTagName('head')[0];

        if (document.getElementById("reloaded_script")) {
          (elem=document.getElementById("reloaded_script")).parentNode.removeChild(elem);  
        }

        var script= document.createElement('script');
        script.src= '4/ninja-slider.js';
        script.id = "reloaded_script";
        head.appendChild(script);

      }
       

      function change_to(id_idx) {
        // for (var i = 0; i < 5; i++) {
        //   if (document.getElementById(slider_ids[i])) {
        //     document.getElementById(slider_ids[i]).style.display = "none";
        //   }
        // }

        // for (var i = 0; i < 5; i++) {
        //   var element =  document.getElementById(slider_ids[i]);
        //   if (typeof(element) == 'undefined' || element == null)
        //   {
        //     console.log("active", slider_ids[i]);
        //     document.getElementById('ninja-slider').id = slider_ids[i];
        //     document.getElementById(slider_ids[i]).style.display = "none";
        //   }
        // }

        // document.getElementById(slider_ids[id_idx]).style.display = "block";
        // document.getElementById(slider_ids[id_idx]).id = 'ninja-slider';
        // // reload_js();

        sessionStorage.setItem("reload_to", id_idx);
        sessionStorage.setItem("myclothesdict", myclothes);
        document.location.reload();
      }

      window.onload = function() {
          var reload_idx = sessionStorage.getItem("reload_to");
          if (reload_idx) {
            document.getElementById(slider_ids[reload_idx]).id = 'ninja-slider';
            reload_js();
            $("#wtitle").text(slider_names[reload_idx]);
          } else {
            document.getElementById(slider_ids[2]).id = 'ninja-slider';
            reload_js();
          }

          var clothes_old = sessionStorage.getItem("myclothesdict");
          console.log("old", clothes_old);
          if (clothes_old) {
            clothes_old = clothes_old.split(",");
            myclothes[0] = parseInt(clothes_old[0]);
            myclothes[1] = parseInt(clothes_old[1]);
            myclothes[2] = parseInt(clothes_old[2]);
            myclothes[3] = parseInt(clothes_old[3]);
            myclothes[4] = parseInt(clothes_old[4]);
          }

          set_selected_items();
          wear_all_clothes();



      // THE TITLE AND TIME
      var idx_to_month = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
      var idx_to_day = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]

      function loadTimeDate() {
        var today = new Date();
        var h = today.getHours();
        var m = today.getMinutes();
        
        m = checkTime(m);
        hour = get_ampm_hour(h);
        day_part = "AM";
        if (h >= 12) {
          day_part = "PM";
        }
        var hello_message = get_hello_message(h);

        document.getElementById('display_time').innerHTML = hour + ":" + m + "   " + day_part;
        var d = today.getDate();
        var day = idx_to_day[today.getDay()];
        var month = idx_to_month[today.getMonth()];
        document.getElementById('display_date').innerHTML = day + ", " + month + " " + d  ;
        document.getElementById('hello_message').innerHTML = hello_message;
        var t = setTimeout(loadTimeDate, 500);
      }

      function get_ampm_hour(h) {
        if (h == 0 || h == 12) {
          return 12
        }
        return h%12
      }

      function get_hello_message(h) {
        if (h <= 4 && h >= 22) {
          return "Good Night!"
        }
        
        if (h > 4 && h <= 11) {
          return "Good Morning!"
        }
        
        if (h > 11 && h < 16) {
          return "Good Afternoon!"
        }
        return "Good Evening!"
      }

      function checkTime(i) {
        if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
        return i;
      } 


      loadTimeDate();
      }
      







    </script>




  </body>



</html>
